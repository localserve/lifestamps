(this.webpackJsonplifestamps=this.webpackJsonplifestamps||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a=n(4),r=n.n(a),c=n(16),i=n.n(c),o=(n(29),n(3)),s=n(7),l=(n(30),Object(a.createContext)({})),u=n(0);function d(){return Object(u.jsx)(l.Consumer,{children:function(e){var t=e.onAddStamp,n=e.onTextInput,a=e.textValue;return Object(u.jsxs)("div",{className:"add-text-container",children:[Object(u.jsx)("textarea",{value:a,id:"add-text",name:"add-text",placeholder:"enter text here",onInput:function(e){return n(e)}}),Object(u.jsx)("button",{id:"add-text-btn",onClick:t,children:"+"})]})}})}var f=n(1),j=n(5),b=n(47),m=n(17),v=n.n(m);function O(){var e=(new Date).toJSON().split("T"),t=Object(s.a)(e,2),n=t[0],a=t[1].split(".")[0];return"".concat(n.replace(/-/g,".")," ").concat(a)}function g(e,t){var n=Date.now();return{note:e,ts:O(),id:Object(b.a)(),created_at:n,updated_at:n,serial:t,type:"LifeStamp",tags:p(e),favorite:!1,sha1:v()(e)}}function p(e){var t=(e.match(/^#[A-Za-z0-9-_]+|\W#[A-Za-z0-9-_]+/g)||[]).map((function(e){return e.trim()})).map((function(e){return e.toLocaleLowerCase()}));return Array.from(new Set(t))}function h(){if("undefined"===typeof localStorage)return!1;try{return localStorage.setItem("feature_test","yes"),"yes"===localStorage.getItem("feature_test")&&(localStorage.removeItem("feature_test"),!0)}catch(e){return!1}}function x(e){if(h())return null!==localStorage.getItem(e)}function S(e){return{push:function(t){!function(e,t){if(h())if(x(e)){var n=JSON.parse(localStorage.getItem(e));n.push(t),localStorage.setItem(e,JSON.stringify(n))}else{var a=[t];localStorage.setItem(e,JSON.stringify(a))}}(e,t)},fetch:function(){var t=[];try{t=JSON.parse(function(e){return h()?localStorage.getItem(e):"no localStorage"}(e)||"")||[]}catch(n){console.error(null===n||void 0===n?void 0:n.message)}finally{return t}},clear:function(){!function(e){h()&&x(e)&&localStorage.removeItem(e)}(e)},addAtBeginning:function(t){!function(e,t){if(h()){if(x(e)){var n=localStorage.getItem(e);if(n){var a=JSON.parse(n);return a.unshift(t),void localStorage.setItem(e,JSON.stringify(a))}}var r=[t];localStorage.setItem(e,JSON.stringify(r))}}(e,t)}}}var N=n.p+"static/media/file_upload_white_24dp.efa74fb3.svg";function y(e){var t=e.actions.onFileRead;return Object(u.jsxs)("label",{htmlFor:"upload",style:{cursor:"pointer"},className:"upload-control",children:[Object(u.jsx)("img",{src:N,alt:"upload previously downloaded json."}),Object(u.jsx)("input",{type:"file",id:"upload",name:"upload",accept:"application/json",onChange:function(e){var n,a,r=null===e||void 0===e||null===(n=e.currentTarget)||void 0===n||null===(a=n.files)||void 0===a?void 0:a[0],c=new FileReader;c.onload=function(e){var n=JSON.parse(e.target.result);t(n),console.log(n)},c.readAsText(r,"utf-8")},style:{display:"none"}})]})}var F=n.p+"static/media/file_download_white_24dp.e46f4fb0.svg";function _(){return Object(u.jsx)(l.Consumer,{children:function(e){var t=e.stamps;return Object(u.jsx)(u.Fragment,{children:t.length>0&&Object(u.jsx)("a",{href:"data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(t,null,4))),download:"lifestamps-".concat((new Date).toLocaleDateString(),".json"),className:"download-control",children:Object(u.jsx)("img",{src:F,alt:"download your lifestamps as json"})})})}})}var I=n(22),C=n.p+"static/media/delete_black_24dp.1129c53a.svg",T=n.p+"static/media/favorite_border_black_24dp.8d60aaea.svg",k=n.p+"static/media/favorite_black_24dp.66089a9f.svg";function w(e){return Object(u.jsx)("span",{className:e.classes,onClick:e.onClick,children:e.children})}function J(e){var t=e.id,n=e.note,a=e.ts,r=e._key,c=e.tags,i=e.setFilter,o=e.onDelete,s=e.onToggle,l=e.favorite;return Object(u.jsxs)("div",{className:"stamp",children:[Object(u.jsx)("div",{className:"ts",children:a}),Object(u.jsx)("div",{className:"note",children:Object(u.jsx)(I.a,{children:n})}),c&&(null===c||void 0===c?void 0:c.length)>0&&Object(u.jsx)("div",{className:"tags",children:c.map((function(e,t){return Object(u.jsx)("span",{className:"tag",onClick:function(){return i(e)},children:e},"key-tag-".concat(t))}))}),Object(u.jsxs)("div",{className:"stamp-actions",children:[Object(u.jsx)(w,{classes:"delete-btn btn",onClick:function(){return o(t)},children:Object(u.jsx)("img",{src:C,alt:"delete stamp"})}),Object(u.jsx)(w,{classes:"favorite-btn btn ".concat(l?"fav":"unfav"),onClick:function(){return s(t)},children:Object(u.jsx)("img",{src:l?k:T,alt:"favorite this stamp"})})]})]},r)}function A(e){var t=e.filter,n=e.setFilter;return Object(u.jsx)(u.Fragment,{children:t&&Object(u.jsxs)("div",{className:"filter-close",onClick:function(){n("")},children:["clear ",t]})})}function D(e){var t=e.stamps,n=e.onDeleteStamp,r=e.onToggleFavorite,c=e.searchTerm,i=e.filter,o=e.setFilter;function s(e){n(t.find((function(t){return t.id===e})))}function l(e){r(t.find((function(t){return t.id===e})))}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(A,{filter:i,setFilter:o}),Object(u.jsx)("div",{className:"stamps",children:function(e){var t=e&&e.length>0?e.sort((function(e,t){return t.created_at-e.created_at})).map((function(e,t){return{note:e.note,ts:e.ts,_key:"list-item-".concat(t),tags:e.tags,id:e.id,setFilter:o,onDelete:s,onToggle:l,favorite:e.favorite}})):[],n=i?t.filter((function(e){var t;return null===(t=e.tags)||void 0===t?void 0:t.includes(i)})):t;return c?n.filter((function(e){return e.note.includes(c)})):n}(t).map((function(e){return Object(a.createElement)(J,Object(j.a)(Object(j.a)({},e),{},{key:"".concat(e._key,"-container")}))}))},"stamps")]})}function E(){return Object(u.jsx)(l.Consumer,{children:function(e){var t=e.stamps,n=e.onDeleteStamp,a=e.onToggleFavorite,r=e.search,c=e.filter,i=e.setFilter;return Object(u.jsx)(D,{stamps:t,onDeleteStamp:n,onToggleFavorite:a,searchTerm:r,filter:c,setFilter:i},"lifestamps-container")}})}function L(){return Object(u.jsx)(l.Consumer,{children:function(e){var t=e.stamps,n=e.setFilter;return Object(u.jsx)("div",{className:"tag-container",children:Object(u.jsx)(B,{stamps:t,setFilter:n})})}})}function B(e){var t=e.stamps,n=e.setFilter,a=t.reduce((function(e,t){return t.tags?[].concat(Object(o.a)(e),Object(o.a)(t.tags)):e}),[]).sort((function(e,t){return e.localeCompare(t)})),r=Array.from(new Set(a));return Object(u.jsx)("select",{className:"tag-select",onChange:function(e){return n(e.currentTarget.value)},children:Object(u.jsxs)("optgroup",{defaultValue:"",title:"select a tag",label:"select a tag",children:[Object(u.jsx)("option",{value:""}),r.map((function(e,t){return Object(u.jsx)("option",{value:e,children:e})})),")"]})})}var P=function(){var e=S("LIFESTAMPS"),t=e.addAtBeginning,n=e.fetch,r=e.clear,c=Object(a.useState)(""),i=Object(s.a)(c,2),b=i[0],m=i[1],v=Object(a.useState)(n()),O=Object(s.a)(v,2),p=O[0],h=O[1],x=Object(a.useState)(""),N=Object(s.a)(x,2),F=N[0],I=N[1],C=Object(a.useState)(""),T=Object(s.a)(C,2),k=T[0],w=T[1];return Object(a.useEffect)((function(){!function(){var e=function(e){return e.map((function(e){var t=g(e.note,e.serial);return Object(j.a)(Object(j.a)(Object(j.a)({},t),e),{},{tags:t.tags,sha1:t.sha1})}))}(p);r(),e.forEach((function(e){return t(e)})),h(e)}()}),[]),Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(l.Provider,{value:{stamps:p,onAddStamp:function(e){if(b){var n=g(b,p.length+1);h([n].concat(Object(o.a)(p))),t(n),m("")}},onTextInput:function(e){m(e.currentTarget.value)},textValue:b,onDeleteStamp:function(e){if(e){console.log("deleting a stamp",e);var n=function(e,t,n){var a=n.findIndex((function(n){return n.id===t&&n.serial===e}));return[].concat(Object(o.a)(n.slice(0,a)),Object(o.a)(n.slice(a+1)))}(e.serial,e.id,p);r(),n.forEach((function(e){return t(e)})),h(n)}},onToggleFavorite:function(e){if(e){console.log("toggling favorite",(a=e,JSON.stringify(a,null,4)));var n=function(e,t,n){var a=n.findIndex((function(n){return n.id===t&&n.serial===e}));return n[a].favorite=!n[a].favorite,Object(o.a)(n)}(e.serial,e.id,p);r(),n.forEach((function(e){return t(e)})),h(n)}var a},search:F,filter:k,setFilter:w},children:[Object(u.jsxs)("header",{className:"header",children:[Object(u.jsx)("h2",{className:"brand",children:Object(u.jsx)("a",{href:"/lifestamps",children:"LifeStamps"})}),Object(u.jsx)("div",{className:"search-container",children:Object(u.jsx)("input",{type:"text",placeholder:"search",onInput:function(e){I(e.currentTarget.value)},value:F})}),Object(u.jsx)(L,{})]}),Object(u.jsxs)("section",{className:"content",children:[Object(u.jsx)(d,{}),Object(u.jsx)(E,{})]}),Object(u.jsxs)("footer",{className:"footer",children:[Object(u.jsxs)("div",{className:"controls",children:[Object(u.jsx)(u.Fragment,{children:"JSON: (you can download and upload your data)"}),Object(u.jsx)(_,{}),Object(u.jsx)(y,{actions:{onFileRead:function(e){var n=function(e,t){var n=e.reduce((function(e,t){return Object(j.a)(Object(j.a)({},e),{},Object(f.a)({},"".concat(t.id),t))}),{});return n=t.reduce((function(e,t){return Object(j.a)(Object(j.a)({},e),{},Object(f.a)({},"".concat(t.id),t))}),n),Object.values(n)}(p,e);r(),n.forEach((function(e){return t(e)})),h(n)}}})]}),Object(u.jsx)("div",{children:"\xa0"}),Object(u.jsxs)("h6",{children:["lifestamps"," by anubhav | ","0.41.0-190"]})]})]})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(P,{})}),document.getElementById("root")),R()}},[[42,1,2]]]);
//# sourceMappingURL=main.fff3cf98.chunk.js.map