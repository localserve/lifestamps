(this.webpackJsonplifestamps=this.webpackJsonplifestamps||[]).push([[0],{27:function(t,e,n){},28:function(t,e,n){},34:function(t,e,n){"use strict";n.r(e);var a=n(3),c=n.n(a),r=n(15),o=n.n(r),s=(n(27),n(4)),i=n(7),l=(n(28),Object(a.createContext)({})),u=n(0);function d(){return Object(u.jsx)(l.Consumer,{children:function(t){var e=t.onAddStamp,n=t.onTextInput,a=t.textValue;return Object(u.jsxs)("div",{className:"add-text-container",children:[Object(u.jsx)("textarea",{value:a,id:"add-text",name:"add-text",placeholder:"enter text here",onInput:function(t){return n(t)}}),Object(u.jsx)("button",{id:"add-text-btn",onClick:e,children:"+"})]})}})}var j=n(5),f=n(20);function m(){return Object(u.jsx)(l.Consumer,{children:function(t){var e=t.stamps;return Object(u.jsx)(b,{stamps:e},"lifestamps-container")}})}function b(t){var e=t.stamps,n=Object(a.useState)(""),c=Object(i.a)(n,2),r=c[0],o=c[1];return Object(u.jsxs)(u.Fragment,{children:[r&&Object(u.jsxs)("div",{className:"filter-close",onClick:function(){o("")},children:["clear ",r]}),Object(u.jsx)("div",{className:"stamps",children:function(t){var e=t&&t.length>0?t.sort((function(t,e){return e.created_at-t.created_at})).map((function(t,e){return{note:t.note,ts:t.ts,_key:"list-item-".concat(e),tags:t.tags,setFilterTag:o}})):[];return r?e.filter((function(t){var e;return null===(e=t.tags)||void 0===e?void 0:e.includes(r)})):e}(e).map((function(t){return Object(a.createElement)(O,Object(j.a)(Object(j.a)({},t),{},{key:"".concat(t._key,"-container")}))}))},"stamps")]})}function O(t){var e=t.note,n=t.ts,a=t._key,c=t.tags,r=t.setFilterTag;return Object(u.jsxs)("div",{className:"stamp",children:[Object(u.jsx)("div",{className:"ts",children:n}),Object(u.jsx)("div",{className:"note",children:Object(u.jsx)(f.a,{children:e})}),c&&(null===c||void 0===c?void 0:c.length)>0&&Object(u.jsx)("div",{className:"tags",children:c.map((function(t,e){return Object(u.jsx)("span",{className:"tag",onClick:function(){return r(t)},children:t},"key-tag-".concat(e))}))})]},a)}var p=n(1),g=n(39);function v(){var t=(new Date).toJSON().split("T"),e=Object(i.a)(t,2),n=e[0],a=e[1].split(".")[0];return"".concat(n.replace(/-/g,".")," ").concat(a)}function h(t,e){var n=Date.now();return{note:t,ts:v(),id:Object(g.a)(),created_at:n,updated_at:n,serial:e,type:"LifeStamp",tags:x(t)}}function x(t){var e=(t.match(/^#[A-Za-z0-9-_]+|\W#[A-Za-z0-9-_]+/g)||[]).map((function(t){return t.trim()})).map((function(t){return t.toLocaleLowerCase()}));return Array.from(new Set(e))}function S(){if("undefined"===typeof localStorage)return!1;try{return localStorage.setItem("feature_test","yes"),"yes"===localStorage.getItem("feature_test")&&(localStorage.removeItem("feature_test"),!0)}catch(t){return!1}}function y(t){if(S())return null!==localStorage.getItem(t)}function N(t){return{push:function(e){!function(t,e){if(S())if(y(t)){var n=JSON.parse(localStorage.getItem(t));n.push(e),localStorage.setItem(t,JSON.stringify(n))}else{var a=[e];localStorage.setItem(t,JSON.stringify(a))}}(t,e)},fetch:function(){var e=[];try{e=JSON.parse(function(t){return S()?localStorage.getItem(t):"no localStorage"}(t)||"")||[]}catch(n){console.error(null===n||void 0===n?void 0:n.message)}finally{return e}},clear:function(){!function(t){S()&&y(t)&&localStorage.removeItem(t)}(t)},addAtBeginning:function(e){!function(t,e){if(S()){if(y(t)){var n=localStorage.getItem(t);if(n){var a=JSON.parse(n);return a.unshift(e),void localStorage.setItem(t,JSON.stringify(a))}}var c=[e];localStorage.setItem(t,JSON.stringify(c))}}(t,e)}}}var I=n.p+"static/media/file_upload_white_24dp.efa74fb3.svg";function _(t){var e=t.actions.onFileRead;return Object(u.jsxs)("label",{htmlFor:"upload",style:{cursor:"pointer"},className:"upload-control",children:[Object(u.jsx)("img",{src:I,alt:"upload previously downloaded json."}),Object(u.jsx)("input",{type:"file",id:"upload",name:"upload",accept:"application/json",onChange:function(t){var n,a,c=null===t||void 0===t||null===(n=t.currentTarget)||void 0===n||null===(a=n.files)||void 0===a?void 0:a[0],r=new FileReader;r.onload=function(t){var n=JSON.parse(t.target.result);e(n),console.log(n)},r.readAsText(c,"utf-8")},style:{display:"none"}})]})}var w=n.p+"static/media/file_download_white_24dp.e46f4fb0.svg";function F(){return Object(u.jsx)(l.Consumer,{children:function(t){var e=t.stamps;return Object(u.jsx)(u.Fragment,{children:e.length>0&&Object(u.jsx)("a",{href:"data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(e,null,4))),download:"lifestamps-".concat((new Date).toLocaleDateString(),".json"),className:"download-control",children:Object(u.jsx)("img",{src:w,alt:"download your lifestamps as json"})})})}})}var C=function(){var t=N("LIFESTAMPS"),e=t.addAtBeginning,n=t.fetch,c=t.clear,r=Object(a.useState)(""),o=Object(i.a)(r,2),f=o[0],b=o[1],O=Object(a.useState)(function(t){return t.map((function(t){var e=h(t.note,t.serial);return Object(j.a)(Object(j.a)(Object(j.a)({},e),t),{},{tags:e.tags})}))}(n())),g=Object(i.a)(O,2),v=g[0],x=g[1];return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)(l.Provider,{value:{stamps:v,onAddStamp:function(t){if(f){var n=h(f,v.length+1);x([n].concat(Object(s.a)(v))),e(n),b("")}},onTextInput:function(t){b(t.currentTarget.value)},textValue:f},children:[Object(u.jsx)("header",{className:"header",children:Object(u.jsx)("h2",{className:"brand",children:Object(u.jsx)("a",{href:"/lifestamps",children:"LifeStamps"})})}),Object(u.jsxs)("section",{className:"content",children:[Object(u.jsx)(d,{}),Object(u.jsx)(m,{})]}),Object(u.jsxs)("footer",{className:"footer",children:[Object(u.jsxs)("div",{className:"controls",children:[Object(u.jsx)(u.Fragment,{children:"JSON: (you can download and upload your data)"}),Object(u.jsx)(F,{}),Object(u.jsx)(_,{actions:{onFileRead:function(t){var n=function(t,e){var n=t.reduce((function(t,e){return Object(j.a)(Object(j.a)({},t),{},Object(p.a)({},"".concat(e.id),e))}),{});return n=e.reduce((function(t,e){return Object(j.a)(Object(j.a)({},t),{},Object(p.a)({},"".concat(e.id),e))}),n),Object.values(n)}(v,t);c(),n.forEach((function(t){return e(t)})),x(n)}}})]}),Object(u.jsx)("div",{children:"\xa0"}),Object(u.jsx)("h6",{children:"lifestamps by anubhav | 0.17.0-83"})]})]})})},J=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))};o.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(C,{})}),document.getElementById("root")),J()}},[[34,1,2]]]);
//# sourceMappingURL=main.a954e429.chunk.js.map