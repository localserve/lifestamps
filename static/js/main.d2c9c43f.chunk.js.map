{"version":3,"sources":["components/contexts/StampsContext.contexts.tsx","components/AddText.tsx","components/ListStamps.tsx","lib/stamps.utils.ts","lib/localStorge.utils.ts","components/hooks/localStorage.hook.ts","icons/file_upload_white_24dp.svg","components/InputFile.tsx","icons/file_download_white_24dp.svg","components/DownloadFile.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["StampsContext","createContext","AddText","Consumer","onAddStamp","onTextInput","textValue","className","value","id","name","placeholder","onInput","e","onClick","ListStamps","stamps","length","map","note","i","replace","ts","key","values","ListItem","dangerouslySetInnerHTML","__html","formattedTimeStamp","Date","toJSON","split","day","time","featureAvailable","localStorage","setItem","getItem","removeItem","exists","useLocalList","push","JSON","parse","stringify","append","fetch","data","get","console","error","message","clear","remove","addAtBeginning","_values","unshift","InputFile","props","onFileRead","actions","htmlFor","style","cursor","src","uploadIcon","alt","type","accept","onChange","file","currentTarget","files","reader","FileReader","onload","target","result","log","readAsText","display","DownloadFile","href","encodeURIComponent","download","toLocaleDateString","downloadFile","App","addStamp","fetchStamps","clearStamps","useState","setTextValue","setStamps","Provider","stamp","serial","dts","now","guid","created_at","updated_at","createStamp","mergedLifeStamps","stampsA","stampsB","obj","reduce","a","Object","merge","forEach","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d2c9c43f.chunk.js","sourcesContent":["import {createContext, FormEvent, SyntheticEvent} from \"react\";\nimport {LifeStamp} from \"../../lib/stamps.utils\";\n\ntype LifeStampContextT = {\n    stamps: LifeStamp[],\n    onTextInput: (e: FormEvent<HTMLTextAreaElement>) => void,\n    onAddStamp: (e: SyntheticEvent<HTMLButtonElement, Event>) => void,\n    textValue: string\n}\nconst StampsContext = createContext({} as LifeStampContextT);\n\nexport {StampsContext};\nexport type {LifeStampContextT};\n","import React from \"react\";\nimport {StampsContext} from \"./contexts/StampsContext.contexts\";\n\nexport default function AddText() {\n    return (\n        <StampsContext.Consumer>\n            {({onAddStamp, onTextInput, textValue}) => {\n                return (\n                    <div className=\"add-text-container\">\n                        <textarea\n                            value={textValue}\n                            id=\"add-text\"\n                            name=\"add-text\"\n                            placeholder=\"enter text here\"\n                            onInput={(e) => onTextInput(e)}\n                        />\n                        <button id=\"add-text-btn\" onClick={onAddStamp}>+</button>\n                    </div>\n                );\n            }}\n        </StampsContext.Consumer>\n    );\n}\n","import React from \"react\";\nimport {LifeStamp} from \"../lib/stamps.utils\";\nimport {StampsContext} from './contexts/StampsContext.contexts';\n\nexport default function ListStamps() {\n\n    return (\n        <StampsContext.Consumer>\n            {\n                ({stamps}) => {\n                    return <div className=\"stamps\">\n                        {\n                            stamps && stamps.length > 0 &&\n                            stamps\n                                .map((note: LifeStamp, i: number) => ({\n                                    note: note.note.replace(/(#\\w+)/g, '<span class=\"highlighted\">$1</span>'),\n                                    ts: note.ts,\n                                    key: `list-item-${i}`\n                                }))\n                                .map((values: ListItemT) => <ListItem {...values} />)\n                        }\n                    </div>;\n                }\n            }\n        </StampsContext.Consumer>\n    );\n}\n\ntype ListItemT = {\n    note: string;\n    ts: string;\n    key: string;\n}\n\nfunction ListItem({note, ts, key}: ListItemT) {\n    return <div className=\"stamp\" key={key}>\n        <div className=\"ts\">\n            {ts}\n        </div>\n        <div className=\"note\"\n             dangerouslySetInnerHTML={{__html: note}}>\n        </div>\n    </div>;\n}","import {v4 as guid} from 'uuid';\n\nexport type LifeStamp = {\n    note: string,\n    ts: string,\n    id: string,\n    created_at: number;\n    updated_at: number;\n    serial: number;\n    type: string;\n}\n\nfunction formattedTimeStamp() {\n    const d = new Date().toJSON();\n    const [day, timeString] = d.split('T');\n    const time = timeString.split('.')[0];\n    return `${day.replace(/-/g, '.')} ${time}`;\n}\n\nexport default function createStamp(note: string, serial: number): LifeStamp {\n    const dts: number = Date.now();\n    return {note, ts: formattedTimeStamp(), id: guid(), created_at: dts, updated_at: dts, serial, type: 'LifeStamp'};\n}\n\nfunction merge<T extends LifeStamp>(stampsA: T[], stampsB: T[]) {\n    let obj = stampsA.reduce((a: Object, stamp: T) => {\n        a = {...a, [`${stamp.id}`]: stamp};\n        return a;\n    }, {});\n    obj = stampsB.reduce((a: Object, stamp: T) => {\n        a = {...a, [`${stamp.id}`]: stamp};\n        return a;\n    }, obj);\n    const merged = Object.values(obj);\n    return merged;\n}\n\nexport {merge};\n","function featureAvailable() {\n    if (typeof localStorage !== 'undefined') {\n        try {\n            localStorage.setItem('feature_test', 'yes');\n            if (localStorage.getItem('feature_test') === 'yes') {\n                localStorage.removeItem('feature_test');\n                // localStorage is enabled\n                return true;\n            } else {\n                // localStorage is disabled\n                return false;\n            }\n        } catch (e) {\n            // localStorage is disabled\n            return false;\n        }\n    } else {\n        // localStorage is not available\n        return false;\n    }\n}\n\nfunction exists(key: string) {\n    if (featureAvailable()) {\n        return localStorage.getItem(key) !== null;\n    }\n}\n\nfunction unshift<T>(key: string, value: T) {\n    if (featureAvailable()) {\n        if (exists(key)) {\n            const _values = localStorage.getItem(key);\n            if (_values) {\n                let values = JSON.parse(_values as string);\n                values.unshift(value);\n                localStorage.setItem(key, JSON.stringify(values));\n                return;\n            }\n        }\n        const values = [value];\n        localStorage.setItem(key, JSON.stringify(values));\n    }\n}\n\nfunction append<T>(key: string, value: T) {\n    if (featureAvailable()) {\n        if (exists(key)) {\n            let values = JSON.parse(localStorage.getItem(key) as string);\n            values.push(value);\n            localStorage.setItem(key, JSON.stringify(values));\n        } else {\n            const values = [value];\n            localStorage.setItem(key, JSON.stringify(values));\n        }\n    }\n}\n\nfunction set(key: string, value: string) {\n    if (featureAvailable()) {\n        localStorage.setItem(key, value);\n    }\n}\n\nfunction get(key: string) {\n    return featureAvailable() ? localStorage.getItem(key) : 'no localStorage';\n}\n\nfunction remove(key: string) {\n    if (featureAvailable() && exists(key)) {\n        localStorage.removeItem(key);\n    }\n}\n\nexport {exists, featureAvailable, get, set, append, remove, unshift};\n","import {append, get, remove, unshift} from \"../../lib/localStorge.utils\";\n\nexport default function useLocalList<T>(key: string) {\n    function push(value: T) {\n        append<T>(key, value);\n    }\n\n    function addAtBeginning<T>(value: T) {\n        unshift<T>(key, value);\n    }\n\n    function fetch<T>(): T[] {\n        let data: T[] = [];\n        try {\n            data = JSON.parse(get(key) as string || '') || [] as T[];\n        } catch (e: any) {\n            console.error(e?.message);\n        } finally {\n            return data;\n        }\n    }\n\n    function clear() {\n        remove(key);\n    }\n\n    return {push, fetch, clear, addAtBeginning};\n}\n","export default __webpack_public_path__ + \"static/media/file_upload_white_24dp.efa74fb3.svg\";","import React, {SyntheticEvent} from \"react\";\n\nimport uploadIcon from '../icons/file_upload_white_24dp.svg';\n\nexport default function InputFile(props: any) {\n    const {onFileRead} = props.actions;\n\n    function onFile(e: SyntheticEvent<HTMLInputElement>) {\n        const file = e?.currentTarget?.files?.[0];\n        const reader = new FileReader();\n        reader.onload = function (e) {\n            const data = JSON.parse(e!.target!.result as string);\n            onFileRead(data);\n            console.log(data);\n        };\n        reader.readAsText(file!, 'utf-8');\n    }\n\n    return (\n        <label htmlFor=\"upload\" style={{cursor: 'pointer'}} className=\"upload-control\">\n            <img src={uploadIcon} alt=\"upload previously downloaded json.\"/>\n            <input\n                type=\"file\"\n                id=\"upload\"\n                name=\"upload\"\n                accept=\"application/json\"\n                onChange={onFile}\n                style={{display: 'none'}}\n            />\n        </label>\n\n    );\n}\n","export default __webpack_public_path__ + \"static/media/file_download_white_24dp.e46f4fb0.svg\";","import React from 'react';\nimport downloadFile from \"../icons/file_download_white_24dp.svg\";\nimport {StampsContext} from \"./contexts/StampsContext.contexts\";\n\nexport default function DownloadFile() {\n    return <StampsContext.Consumer>\n        {({stamps}) => <>{\n            stamps.length > 0 &&\n            <a\n                href={`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(stamps, null, 4))}`}\n                download={`lifestamps-${new Date().toLocaleDateString()}.json`}\n                className=\"download-control\"\n            >\n                <img src={downloadFile} alt=\"download your lifestamps as json\"/>\n            </a>\n        }\n        </>\n        }\n    </StampsContext.Consumer>;\n}","import React, {FormEvent, SyntheticEvent, useState} from 'react';\nimport './App.css';\nimport AddText from \"./components/AddText\";\nimport ListStamps from \"./components/ListStamps\";\nimport createStamp, {LifeStamp, merge} from \"./lib/stamps.utils\";\nimport useLocalList from \"./components/hooks/localStorage.hook\";\nimport InputFile from \"./components/InputFile\";\nimport DownloadFile from \"./components/DownloadFile\";\nimport {StampsContext} from './components/contexts/StampsContext.contexts';\n\nfunction App() {\n    const {addAtBeginning: addStamp, fetch: fetchStamps, clear: clearStamps} = useLocalList('LIFESTAMPS');\n    const [textValue, setTextValue] = useState('');\n    const [stamps, setStamps] = useState(fetchStamps<LifeStamp>());\n\n\n    function onTextInput(e: FormEvent<HTMLTextAreaElement>) {\n        setTextValue(e.currentTarget.value);\n    }\n\n    function onAddStamp(e: SyntheticEvent<HTMLButtonElement>) {\n        if (textValue) {\n            const stamp = createStamp(textValue, stamps.length + 1);\n            setStamps([stamp, ...stamps]);\n            addStamp(stamp);\n            setTextValue('');\n        }\n    }\n\n    function onFileRead(data: LifeStamp[]) {\n        const mergedLifeStamps = merge(stamps, data);\n        clearStamps();\n        mergedLifeStamps.forEach((stamp: string) => addStamp(stamp));\n        setStamps(mergedLifeStamps);\n    }\n\n    return (\n        <div className=\"App\">\n            <StampsContext.Provider value={{\n                stamps,\n                onAddStamp,\n                onTextInput,\n                textValue\n            }}>\n                <header className=\"header\">\n                    <h2 className=\"brand\"><a href=\"/lifestamps\">LifeStamps</a></h2>\n                </header>\n                <section className=\"content\">\n                    <AddText/>\n                    <ListStamps/>\n                </section>\n                <footer className=\"footer\">\n                    <div className=\"controls\">\n                        <>JSON: (you can download and upload your data)</>\n                        <DownloadFile />\n                        <InputFile actions={{onFileRead}}/>\n                    </div>\n                    <div>&nbsp;</div>\n                    <h6>lifestamps by anubhav | 0.14.0-80</h6>\n                </footer>\n            </StampsContext.Provider>\n        </div>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}